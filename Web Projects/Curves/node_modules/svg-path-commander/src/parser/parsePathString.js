import scanSegment from 'svg-path-commander/src/parser/scanSegment';
import skipSpaces from 'svg-path-commander/src/parser/skipSpaces';
import clonePath from 'svg-path-commander/src/process/clonePath';
import PathParser from 'svg-path-commander/src/parser/pathParser';
import isPathArray from 'svg-path-commander/src/util/isPathArray';

/**
 * Parses a path string value and returns an array
 * of segments we like to call `pathArray`.
 *
 * @param {SVGPath.pathArray | string} pathInput the string to be parsed
 * @returns {SVGPath.pathArray | string} the resulted `pathArray` or error string
 */
export default function parsePathString(pathInput) {
  if (isPathArray(pathInput)) {
    return clonePath(pathInput);
  }

  const path = new PathParser(pathInput);

  skipSpaces(path);

  while (path.index < path.max && !path.err.length) {
    scanSegment(path);
  }

  return path.err ? path.err : path.segments;
}
